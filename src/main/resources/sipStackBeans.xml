<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE beans PUBLIC "-//SPRING//DTD BEAN//EN" "http://www.springframework.org/dtd/spring-beans.dtd">

<beans>

    <!--
        A factory for creating SIP URIs from user identifiers.
    -->
    <bean id="sipUriFactory"
          class="org.lastbamboo.common.sip.stack.SipUriFactoryImpl"/>
          
    <!--
        URI utilities.
    -->
    <bean id="uriUtils" class="org.lastbamboo.common.sip.stack.util.UriUtilsImpl">
        </bean>

    <!--
        The factory for creating SIP message headers.
    -->
    <bean id="sipHeaderFactory"
          class="org.lastbamboo.common.sip.stack.message.header.SipHeaderFactoryImpl">
        </bean>

    <!--
        The factory for creating SIP messages.
    -->
    <bean id="sipMessageFactory"
          class="org.lastbamboo.common.sip.stack.message.SipMessageFactoryImpl">
        <constructor-arg><ref local="sipHeaderFactory"/></constructor-arg>
        </bean>

    <!--
        The factory for creating SIP transactions.
    -->
    <bean id="sipTransactionTracker"
          class="org.lastbamboo.common.sip.stack.transaction.client.SipTransactionTrackerImpl">
        </bean>

    <!--
        The factory for creating SIP transactions.
    -->
    <bean id="sipTransactionFactory"
          class="org.lastbamboo.common.sip.stack.transaction.client.SipTransactionFactoryImpl">
    	<constructor-arg><ref local="sipTransactionTracker"/></constructor-arg>
       	<constructor-arg><ref local="sipMessageFactory"/></constructor-arg>
       	<constructor-arg><value>500</value></constructor-arg>
        </bean>

   	<bean id="sipTransportLayer"
              class="org.lastbamboo.common.sip.stack.transport.SipTcpTransportLayerImpl">
   		<constructor-arg><ref local="sipTransactionFactory"/></constructor-arg>
       	<constructor-arg><ref local="sipHeaderFactory"/></constructor-arg>
       	<constructor-arg><ref local="sipMessageFactory"/></constructor-arg>
        </bean>
    </beans>
